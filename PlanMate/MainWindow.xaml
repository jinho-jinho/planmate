<Window x:Class="PlanMate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PlanMate.Converters"
        xmlns:vm="clr-namespace:PlanMate.ViewModels"
        Title="PlanMate"
      Height="800" Width="450"
      MinWidth="420" MinHeight="500"
      WindowStyle="None"
      AllowsTransparency="True"
      Background="Transparent"
      ResizeMode="CanResize"
      MouseDown="Window_MouseDown"
      Loaded="Window_Loaded">

    <Window.Resources>
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <local:ImportanceToColorConverter x:Key="ImportanceToColorConverter"/>
        <local:DayToXDynamicConverter x:Key="DayToXDynamicConverter"/>
        <local:HourRowHeightConverter  x:Key="HourRowHeightConverter"/>
        <local:TimeToYConverter  x:Key="TimeToYConverter"/> 
        <local:DurationToHeightConverter  x:Key="DurationToHeightConverter"/>
        <local:DivideConverter x:Key="DivideConverter"/> 
        <local:MultiplyConverter x:Key="MultiplyConverter"/>
        <local:ContrastForegroundConverter x:Key="ContrastForegroundConverter"/>
    </Window.Resources>

    <Window.InputBindings>
        <KeyBinding Modifiers="Control" Key="N" Command="{Binding AddMemoCommand}" />
        <KeyBinding Modifiers="Control" Key="D" Command="{Binding RemoveMemoCommand}" />
    </Window.InputBindings>

    <Border Background="White" CornerRadius="20">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="20" Opacity="0.4" ShadowDepth="0"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ìƒë‹¨ ë°”: ì´ë¯¸ì§€ + ì°½ ì œì–´ ë²„íŠ¼ -->
            <Grid Grid.Row="0" Background="#EEEEEE">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,0,0" Grid.Column="0">
                    <Image Source="/Resources/planmate.png" Width="20" Height="20" Margin="0,0,5,0"/>
                    <TextBlock Text="PlanMate" FontWeight="Bold" FontSize="14" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right" Margin="0,5,5,5">
                    <Button Content="âž–" Width="20" Height="20" Margin="1"
                        Click="Minimize_Click"
                        Background="Transparent" BorderBrush="Transparent"
                        BorderThickness="0" Padding="0" />
                    <Button Content="âŒ" Width="20" Height="20" Margin="1"
                        Click="Close_Click"
                        Background="Transparent" BorderBrush="Transparent"
                        BorderThickness="0" Padding="0" />
                </StackPanel>
            </Grid>

            <Grid Grid.Row="1" Background="{Binding MainBackground}">
                <!-- ìƒë‹¨: ë‚ ì§œ, ë‚ ì”¨, í”„ë¡œí•„ -->
                <Grid Margin="10" Height="50" VerticalAlignment="Top">
                    <TextBlock Text="{Binding CurrentDate}" 
                       VerticalAlignment="Center" 
                       FontWeight="Bold" FontSize="14"/>
                    
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Image Source="{Binding WeatherIcon}" Width="30" Height="30" Margin="0,0,5,0"/>
                        <TextBlock Text="{Binding Temperature}" FontWeight="Bold" FontSize="14" Margin="0,0,10,0"/>
                        <TextBlock Text="{Binding Location}" VerticalAlignment="Center" FontSize="14"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <Button Content="ðŸŒ¤ï¸" Command="{Binding ShowForecastCommand}" Width="30" Height="30" Margin="0,0,5,0" Background="Transparent"/>
                    </StackPanel>
                </Grid>

                <!-- íƒ­ ë©”ë‰´ -->
                <TabControl x:Name="MainTab" Margin="10,60,10,80">
                    <TabControl.Resources>
                        <DataTemplate x:Key="TabHeaderTemplate">
                            <Border Width="40" Height="20" Background="Transparent">
                                <TextBlock Text="{Binding}" 
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Foreground="Black" />
                            </Border>
                        </DataTemplate>
                    </TabControl.Resources>
                    <!-- ì¼ê°„ -->
                    <TabItem Header="D-Day" HeaderTemplate="{StaticResource TabHeaderTemplate}">
                        <Grid>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <ListBox x:Name="DailyTaskList" SelectionChanged="DailyTaskList_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{Binding Importance, Converter={StaticResource ImportanceToColorConverter}}"
                                                    Margin="5" Padding="5" CornerRadius="5">
                                                <DockPanel>
                                                    <Button Content="âŒ"
                                                            Width="20" Height="20"
                                                            Margin="2,2,13,2"  
                                                            FontSize="12"
                                                            FontWeight="Bold"
                                                            Foreground="White"
                                                            Background="#E74C3C"
                                                            BorderBrush="Transparent"
                                                            Cursor="Hand"
                                                            DockPanel.Dock="Left"
                                                            Command="{Binding DeleteTaskCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding}">
                                                        <Button.Style>
                                                            <Style TargetType="Button">
                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="Button">
                                                                            <Border Background="{TemplateBinding Background}" CornerRadius="10">
                                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                            </Border>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                                <Setter Property="Background" Value="#E74C3C"/>
                                                                <Setter Property="Foreground" Value="White"/>
                                                                <Setter Property="Cursor" Value="Hand"/>
                                                                <Setter Property="FontWeight" Value="Bold"/>
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="Background" Value="#C0392B"/>
                                                                    </Trigger>
                                                                    <Trigger Property="IsPressed" Value="True">
                                                                        <Setter Property="Background" Value="#A93226"/>
                                                                    </Trigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>

                                                    <StackPanel Orientation="Vertical">
                                                        <TextBlock Text="{Binding Name}" FontWeight="Bold" Foreground="#1A1A2E"/>
                                                        <TextBlock Foreground="Blue" FontSize="12">
                                                            <Run Text="ì‹œìž‘ì¼: "/>
                                                            <Run Text="{Binding StartDDay, Mode=OneWay}" FontWeight="Bold" Foreground="White"/>
                                                            <Run Text="   ë§ˆê°ì¼: "/>
                                                            <Run Text="{Binding EndDDay, Mode=OneWay}" FontWeight="Bold" Foreground="White"/>
                                                        </TextBlock>
                                                    </StackPanel>
                                                </DockPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </ScrollViewer>

                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                                <Button Content="ì¤‘ìš”ë„ ìˆœ" Click="SortByImportanceThenDDay_Click" Margin="0,0,5,5"/>
                                <Button Content="ì‹œìž‘ì¼ ìˆœ" Click="SortByStartDateThenImportance_Click" Margin="0,0,5,5"/>
                                <Button Content="ì¢…ë£Œì¼ ìˆœ" Click="SortByEndDateThenImportance_Click" Margin="0,0,5,5"/>
                            </StackPanel>
                        </Grid>
                    </TabItem>

                    <!-- ì›”ê°„ -->
                    <TabItem Header="ìº˜ë¦°ë”" HeaderTemplate="{StaticResource TabHeaderTemplate}">
                        <Grid>
                            <!-- ì›” íƒ€ì´í‹€ & ì´ì „/ë‹¤ìŒ ì›” ë²„íŠ¼ -->
                            <Grid HorizontalAlignment="Stretch" Margin="0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Column="1" VerticalAlignment="Top">
                                    <Button Content="â—€" Width="30" Click="OnPrevMonthClick" Background="Transparent"/>
                                    <TextBlock x:Name="MonthTitle" FontSize="16" FontWeight="Bold" Margin="10,0"/>
                                    <Button Content="â–¶" Width="30" Click="OnNextMonthClick" Background="Transparent"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="2" VerticalAlignment="Top">
                                    <Popup x:Name="MonthPopup"
                                           PlacementTarget="{Binding ElementName=OpenMonthPickerButton}"
                                           Placement="Bottom"
                                           StaysOpen="False"
                                           AllowsTransparency="True"
                                           PopupAnimation="Fade"
                                           Opened="MonthPopup_Opened">
                                        <Border Background="White" BorderBrush="Gray" BorderThickness="1" Padding="5">
                                            <Calendar x:Name="MonthCalendar"
                                                      DisplayMode="Year"
                                                      DisplayModeChanged="MonthCalendar_DisplayModeChanged"/>
                                        </Border>
                                    </Popup>
                                    <Button x:Name="OpenMonthPickerButton" Content="ðŸ“…" Width="30" Click="OpenMonthPickerButton_Click" Background="Transparent"/>
                                </StackPanel>
                            </Grid>

                            <UniformGrid Rows="1" Columns="7" Margin="10,40,10,0">
                                <TextBlock Text="ì¼" TextAlignment="Center" Foreground="Red"/>
                                <TextBlock Text="ì›”" TextAlignment="Center"/>
                                <TextBlock Text="í™”" TextAlignment="Center"/>
                                <TextBlock Text="ìˆ˜" TextAlignment="Center"/>
                                <TextBlock Text="ëª©" TextAlignment="Center"/>
                                <TextBlock Text="ê¸ˆ" TextAlignment="Center"/>
                                <TextBlock Text="í† " TextAlignment="Center" Foreground="Blue"/>
                            </UniformGrid>

                            <UniformGrid x:Name="CalendarGrid" Rows="6" Columns="7" Margin="10,70,10,10"/>
                        </Grid>
                    </TabItem>

                    <!-- 3) ì‹œê°„í‘œ íƒ­ -->
                    <TabItem Header="ì‹œê°„í‘œ" HeaderTemplate="{StaticResource TabHeaderTemplate}">
                        <!-- gijin ê¸°ì¤€ì˜ ScheduleCanvas + ì‹œê°„ì¶• êµ¬ì¡° ìœ ì§€ -->
                        <!-- ìƒëžµ ê°€ëŠ¥: ì´ë¯¸ ìž˜ ì •ë¦¬ëœ ë²„ì „ ìžˆìœ¼ë©´ ë³µì‚¬ ê°€ëŠ¥ -->
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Row="0" Grid.Column="0" Background="Transparent"/>

                            <ScrollViewer x:Name="HeaderScrollViewer"
                                          Grid.Row="0" Grid.Column="1"
                                          HorizontalScrollBarVisibility="Hidden"
                                          VerticalScrollBarVisibility="Disabled">
                                <UniformGrid Columns="7" Width="{Binding ElementName=ScheduleScrollViewer, Path=ViewportWidth}">
                                    <TextBlock Text="ì¼" TextAlignment="Center" Foreground="Red"/>
                                    <TextBlock Text="ì›”" TextAlignment="Center"/>
                                    <TextBlock Text="í™”" TextAlignment="Center"/>
                                    <TextBlock Text="ìˆ˜" TextAlignment="Center"/>
                                    <TextBlock Text="ëª©" TextAlignment="Center"/>
                                    <TextBlock Text="ê¸ˆ" TextAlignment="Center"/>
                                    <TextBlock Text="í† " TextAlignment="Center" Foreground="Blue"/>
                                </UniformGrid>
                            </ScrollViewer>
                            
                            <ScrollViewer x:Name="TimeScrollViewer"
                                          Grid.Row="1" Grid.Column="0"
                                          HorizontalScrollBarVisibility="Disabled"
                                          VerticalScrollBarVisibility="Hidden">
                                <ItemsControl ItemsSource="{Binding TimeLabels}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}"
                                                       FontSize="10"
                                                       HorizontalAlignment="Right"
                                                       Margin="0,0,2,0">
                                                <TextBlock.Height>
                                                    <Binding ElementName="ScheduleScrollViewer"
                                                             Path="ViewportHeight"
                                                             Converter="{StaticResource DivideConverter}"
                                                             ConverterParameter="10"/>
                                                </TextBlock.Height>
                                            </TextBlock>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>

                            <ScrollViewer x:Name="ScheduleScrollViewer"
                                          Grid.Row="1" Grid.Column="1"
                                          HorizontalScrollBarVisibility="Disabled"
                                          VerticalScrollBarVisibility="Auto"
                                          ScrollChanged="ScheduleScrollViewer_ScrollChanged"
                                          PreviewMouseLeftButtonDown="ScheduleScrollViewer_PreviewMouseLeftButtonDown"
                                          PreviewMouseLeftButtonUp="ScheduleScrollViewer_PreviewMouseLeftButtonUp"
                                          MouseMove="ScheduleScrollViewer_MouseMove"
                                          MouseLeave="ScheduleScrollViewer_MouseLeave">
                                
                                <Grid   Width  ="{Binding ElementName=ScheduleScrollViewer, Path=ViewportWidth}"
                                        Height ="{Binding ElementName=ScheduleScrollViewer, Path=ViewportHeight,
                                                Converter={StaticResource MultiplyConverter},
                                                ConverterParameter=2.4}"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch">
                                    <Canvas x:Name="ScheduleCanvas"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Stretch"/>

                                    <ItemsControl ItemsSource="{Binding ScheduleItems}">
                                            <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <Canvas HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemContainerStyle>
                                            <Style TargetType="ContentPresenter">
                                                <Setter Property="Canvas.Left">
                                                    <Setter.Value>
                                                        <MultiBinding Converter="{StaticResource DayToXDynamicConverter}">
                                                            <Binding Path="Day"/>
                                                            <Binding ElementName="ScheduleCanvas" Path="ActualWidth"/>
                                                        </MultiBinding>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter Property="Canvas.Top">
                                                    <Setter.Value>
                                                        <MultiBinding Converter="{StaticResource TimeToYConverter}">
                                                            <Binding Path="StartTime.TotalMinutes"/>
                                                            <Binding ElementName="ScheduleCanvas" Path="ActualHeight"/>
                                                        </MultiBinding>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ItemsControl.ItemContainerStyle>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border x:Name="ScheduleBlock"
                                                        Background="{Binding Background}"
                                                        CornerRadius="3"
                                                        ToolTip="{Binding Title}"
                                                        MouseLeftButtonUp="ScheduleBlock_MouseLeftButtonUp">

                                                    <Border.Width>
                                                        <Binding ElementName="ScheduleCanvas"
                                                                 Path="ActualWidth"
                                                                 Converter="{StaticResource DivideConverter}"
                                                                 ConverterParameter="7"/>
                                                    </Border.Width>

                                                    <Border.Height>
                                                        <MultiBinding Converter="{StaticResource DurationToHeightConverter}">
                                                            <Binding Path="Height"/>
                                                            <Binding ElementName="ScheduleCanvas" Path="ActualHeight"/>
                                                        </MultiBinding>
                                                    </Border.Height>

                                                    <TextBlock Text="{Binding Title}"
                                                               TextWrapping="Wrap"
                                                               Margin="2"
                                                               Foreground="{Binding Background, Converter={StaticResource ContrastForegroundConverter}}">
                                                        <TextBlock.FontSize>
                                                            <Binding ElementName="ScheduleScrollViewer"
                                                                     Path="ViewportHeight"
                                                                     Converter="{StaticResource MultiplyConverter}"
                                                                     ConverterParameter="0.02"/>
                                                        </TextBlock.FontSize>
                                                    </TextBlock>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </Grid>
                            </ScrollViewer>
                        </Grid>
                    </TabItem>

                    <!-- ë©”ëª¨ -->
                    <TabItem Header="ë©” ëª¨" HeaderTemplate="{StaticResource TabHeaderTemplate}">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition x:Name="LeftColumn" Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- ì™¼ìª½ íŒ¨ë„ -->
                            <Grid x:Name="LeftPanel" Grid.Column="0" Background="White">
                                <ListBox x:Name="MemoListBox"
                                 ItemsSource="{Binding Memos}"
                                 SelectedItem="{Binding SelectedMemo}"
                                 DisplayMemberPath="Title"
                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                 SelectionChanged="MemoListBox_SelectionChanged"/>
                            </Grid>

                            <Grid Grid.Column="1" >
                                <Border Background="{Binding MainBackground}"
                                        CornerRadius="5"
                                        Padding="10"
                                        Margin="10">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>

                                        <TextBox x:Name="TitleBox"
                                                 Grid.Row="0"
                                                 Text="{Binding SelectedMemo.Title, UpdateSourceTrigger=PropertyChanged}"
                                                 FontWeight="Bold"
                                                 FontSize="16"
                                                 BorderThickness="0"
                                                 Margin="0,0,0,5">
                                            <TextBox.Style>
                                                <Style TargetType="TextBox">
                                                    <Setter Property="IsEnabled" Value="True"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedMemo}" Value="{x:Null}">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBox.Style>
                                        </TextBox>

                                        <Grid Grid.Row="1">
                                            <TextBox x:Name="ContentBox"
                                                     Text="{Binding SelectedMemo.Content, UpdateSourceTrigger=PropertyChanged}"
                                                     AcceptsReturn="True"
                                                     VerticalScrollBarVisibility="Auto"
                                                     BorderThickness="1"
                                                     Padding="5"
                                                     Background="White"
                                                     Foreground="Black"
                                                     GotFocus="ContentBox_GotFocus"
                                                     LostFocus="ContentBox_LostFocus"
                                                     TextWrapping="Wrap">
                                                <TextBox.Style>
                                                    <Style TargetType="TextBox">
                                                        <Setter Property="IsEnabled" Value="True"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding SelectedMemo}" Value="{x:Null}">
                                                                <Setter Property="IsEnabled" Value="False"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Style>
                                            </TextBox>

                                            <TextBlock x:Name="Placeholder"
                                                       Text="ë‚´ìš© ìž…ë ¥"
                                                       FontStyle="Italic"
                                                       Foreground="Gray"
                                                       Margin="8,8,0,0"
                                                       IsHitTestVisible="False"/>

                                            <StackPanel Orientation="Horizontal"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Bottom"
                                                        Margin="0,0,10,10">
                                                <Button Content="ðŸ—‘ï¸"
                                                        Width="30" Height="30"
                                                        Background="Transparent"
                                                        Command="{Binding RemoveMemoCommand}"
                                                        ToolTip="ë©”ëª¨ ì‚­ì œ"
                                                        Margin="5,0,0,0"/>
                                            </StackPanel>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </Grid>
                            <Button x:Name="ToggleButton"
                                Content="â—€"
                                Width="10" Height="50"
                                VerticalAlignment="Top"
                                HorizontalAlignment="Left"
                                Click="ToggleListPanel_Click"
                                Margin="150,10,0,0"
                                Panel.ZIndex="1000"
                                Grid.ColumnSpan="2"
                                Background="Transparent"/>
                        </Grid>
                    </TabItem>
                </TabControl>

                <!-- í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ -->
                <Grid VerticalAlignment="Bottom" Height="60" Margin="10">
                    <Button Width="50" Height="50"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Click="AiButton_Click"
                    Background="{Binding MainBackground}"
                    BorderBrush="Gray"
                    BorderThickness="1"
                    Padding="0"
                    Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="16"
                    SnapsToDevicePixels="True">
                                    <ContentPresenter HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#AAFFFFFF"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#88CCCCCC"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Content>
                            <TextBlock Text="âœ¨" FontSize="20" FontWeight="Bold" Foreground="Black"/>
                        </Button.Content>
                    </Button>

                    <!-- í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ (ì˜ˆ: Grid.Row="2" ë˜ëŠ” ì ì ˆí•œ ìœ„ì¹˜ì— ì‚½ìž…) -->
                    <StackPanel VerticalAlignment="Bottom" Margin="10" HorizontalAlignment="Center">

                        <!-- ë¶ˆíˆ¬ëª…ë„ ìŠ¬ë¼ì´ë” -->
                        <Slider x:Name="OpacitySlider"
                        Width="180"
                        Height="15"
                        Minimum="0.1"
                        Maximum="1.0"
                        Value="1.0"
                        TickFrequency="0.1"
                        SmallChange="0.05"
                        LargeChange="0.1"
                        ValueChanged="OpacitySlider_ValueChanged"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        ToolTip="{Binding Value, ElementName=OpacitySlider, StringFormat=íˆ¬ëª…ë„: {0:P0}}">

                            <Slider.Resources>
                                <!-- íŠ¸ëž™ ìƒ‰ìƒ -->
                                <Style TargetType="Track">
                                    <Setter Property="Height" Value="6"/>
                                </Style>

                                <!-- ì¸ ìŠ¤íƒ€ì¼ -->
                                <Style TargetType="Thumb">
                                    <Setter Property="Width" Value="10"/>
                                    <Setter Property="Height" Value="10"/>
                                    <Setter Property="Background" Value="DarkSlateGray"/>
                                </Style>
                            </Slider.Resources>
                        </Slider>

                        <!-- ìƒ‰ìƒ ì„ íƒ ë²„íŠ¼ -->
                        <StackPanel Orientation="Horizontal"
            HorizontalAlignment="Center"
            Margin="0,0,0,0">
                            <Button Background="WhiteSmoke"  Width="20" Height="20" Tag="WhiteSmoke"  Click="ChangeBg_Click" Margin="2"/>
                            <Button Background="Honeydew"    Width="20" Height="20" Tag="Honeydew"    Click="ChangeBg_Click" Margin="2"/>
                            <Button Background="MistyRose"   Width="20" Height="20" Tag="MistyRose"   Click="ChangeBg_Click" Margin="2"/>
                            <Button Background="Lavender"    Width="20" Height="20" Tag="Lavender"    Click="ChangeBg_Click" Margin="2"/>
                            <Button Background="LightBlue"   Width="20" Height="20" Tag="LightBlue"   Click="ChangeBg_Click" Margin="2"/>
                            <Button Background="Salmon"      Width="20" Height="20" Tag="Salmon"      Click="ChangeBg_Click" Margin="2"/>
                            <Button Background="LightGray"   Width="20" Height="20" Tag="LightGray"   Click="ChangeBg_Click" Margin="2"/>
                        </StackPanel>

                    </StackPanel>

                    <Button Width="50" Height="50"
        HorizontalAlignment="Right"
        VerticalAlignment="Center"
        Click="AddTaskButton_Click"
        Background="{Binding MainBackground}"
        BorderBrush="Gray"
        BorderThickness="1"
        Padding="0"
        Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="16"
                    SnapsToDevicePixels="True">
                                    <ContentPresenter HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#AAFFFFFF"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#88CCCCCC"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Content>
                            <TextBlock Text="ï¼‹" FontSize="24" FontWeight="Bold" Foreground="Black"/>
                        </Button.Content>
                    </Button>

                </Grid>
                <!-- ë¦¬ì‚¬ì´ì¦ˆ Thumb: 8ê°œ ë°©í–¥ -->

                <Thumb Height="2" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" DragDelta="Resize_Bottom" Cursor="SizeNS" Background="#00FFFFFF"/>
                <Thumb Width="2" HorizontalAlignment="Left" VerticalAlignment="Stretch" DragDelta="Resize_Left" Cursor="SizeWE" Background="#00FFFFFF"/>
                <Thumb Width="2" HorizontalAlignment="Right" VerticalAlignment="Stretch" DragDelta="Resize_Right" Cursor="SizeWE" Background="#00FFFFFF"/>
                <Thumb Width="2" Height="2" HorizontalAlignment="Left" VerticalAlignment="Bottom" DragDelta="Resize_BottomLeft" Cursor="SizeNESW" Background="#00FFFFFF"/>
                <Thumb Width="2" Height="2" HorizontalAlignment="Right" VerticalAlignment="Bottom" DragDelta="Resize_BottomRight" Cursor="SizeNWSE" Background="#00FFFFFF"/>
            </Grid>
            <Thumb Height="2" HorizontalAlignment="Stretch" VerticalAlignment="Top" DragDelta="Resize_Top" Cursor="SizeNS" Background="#00FFFFFF"/>
            <Thumb Width="2" Height="2" HorizontalAlignment="Left" VerticalAlignment="Top" DragDelta="Resize_TopLeft" Cursor="SizeNWSE" Background="#00FFFFFF"/>
            <Thumb Width="2" Height="2" HorizontalAlignment="Right" VerticalAlignment="Top" DragDelta="Resize_TopRight" Cursor="SizeNESW" Background="#00FFFFFF"/>
            
            
        </Grid>
    </Border>
</Window>